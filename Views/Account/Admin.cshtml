@{
    ViewData["Title"] = "Admin";
}

@model CrashesViewModel

<div class="row m-1 p-1">
    <div class="col-2">
        <vc:severities></vc:severities>
    </div>
    <div class="col-10">
        @using (Html.BeginForm())
        {
            <p>
                Find by ID, City, County, or Road: @Html.TextBox("searchString")
                <input type="submit" value="Search" />
            </p>
        }
        <table class="table table-sm table-bordered table-striped sb">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Date and Time</th>
                    <th>Route</th>
                    <th>Road</th>
                    <th>City</th>
                    <th>County</th>
                    <th>Severity</th>
                </tr>
            </thead>
            <tbody>
                @foreach (Crash c in Model.Crashes)
                {
                    <tr>
                        <td>@c.CRASH_ID</td>
                        <td>@c.CRASH_DATETIME</td>
                        <td>@c.ROUTE</td>
                        <td>@c.MAIN_ROAD_NAME</td>
                        @if (c.CITY != null)
                        {
                            <td>@c.CITY.CITY_NAME</td>
                        }
                        else
                        {
                            <td></td>
                        }
                        @if (c.COUNTY != null)
                        {
                            <td>@c.COUNTY.COUNTY_NAME</td>
                        }
                        else
                        {
                            <td></td>
                        }
                        @if (c.SEVERITY != null)
                        {

                            <td>@c.SEVERITY.SEVERITY_DESCRIPTION</td>
                        }
                        else
                        {
                            <td></td>
                        }

                        

                    </tr>
                }
            </tbody>
        </table>

        <div class="text-center">
            @if (ViewBag.PageNum <= 1)
            {
                <a disabled class="btn btn-secondary text-light">Back</a>
            }
            else
            {
                <a class="btn btn-primary text-light" asp-controller="Home" asp-action="CrashData"
                   asp-route-severity="@ViewBag.SelectedSeverity" asp-route-pageNum="@(ViewBag.PageNum - 1)"
                   asp-route-searchString="@ViewBag.SearchString">Back</a>
            }
            @if (ViewBag.PageNum >= ViewBag.TotalPages)
            {
                <a disabled class="btn btn-secondary text-light">Next</a>
            }
            else
            {
                <a class="btn btn-primary text-light" asp-controller="Home" asp-action="CrashData"
                   asp-route-severity="@ViewBag.SelectedSeverity" asp-route-pageNum="@(ViewBag.PageNum + 1)"
                   asp-route-searchString="@ViewBag.SearchString">Next</a>
            }
        </div>
    </div>
</div>